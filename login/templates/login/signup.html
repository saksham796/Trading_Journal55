<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Create Account</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: 'Segoe UI', sans-serif; background: #0b0f1a; color: #fff; height: 100vh; display:flex; justify-content:center; align-items:center; position:relative; overflow:hidden; }
    body::before {
      content: ""; position:absolute; inset:0;
      background-image: linear-gradient(rgba(255,255,255,0.05) 1px, transparent 1px),
                        linear-gradient(90deg, rgba(255,255,255,0.05) 1px, transparent 1px);
      background-size: 40px 40px; animation: moveGrid 20s linear infinite; z-index:0;
    }
    @keyframes moveGrid { from { background-position: 0 0; } to { background-position: 40px 40px; } }
    .card { position:relative; z-index:1; width: 380px; background: rgba(20,25,35,.95); border:1px solid rgba(0,255,128,.3); border-radius:12px; padding: 1.8rem; box-shadow: 0 0 25px rgba(0,255,128,.2); }
    h1 { font-size:1.4rem; margin-bottom:.25rem; color:#00ff99; text-shadow:0 0 8px rgba(0,255,128,.6); text-align:center; }
    p.sub { color:#aaa; font-size:.9rem; margin-bottom:1rem; text-align:center; }
    label { display:block; font-size:.85rem; color:#ccc; margin:.6rem 0 .3rem; }
    input { width:100%; padding:.75rem 1rem; border:1px solid rgba(0,255,128,.3); border-radius:6px; background:#161b22; color:#fff; outline:none; }
    input:focus { border-color:#00ff99; box-shadow:0 0 8px rgba(0,255,128,.4); }
    button { width:100%; padding:.8rem; margin-top: .8rem; background: linear-gradient(90deg,#00ff99,#00ccff); border:none; border-radius:6px; color:#0d1117; font-weight:bold; cursor:pointer; }
    .errorlist { color:#ff6b6b; margin-top:.5rem; list-style: disc; padding-left: 1rem; }
    .msg { color:#ff6b6b; margin-top:.5rem; }
    .links { margin-top:1rem; text-align:center; }
    .links a { color:#00ccff; text-decoration:none; }
  </style>
</head>
<body>
  <div class="card">
    <h1>Create your account</h1>
    <p class="sub">Sign up to start your secure trading journal</p>
    <form method="post" action="{% url 'login:signup' %}">
      {% csrf_token %}
      {# Render fields explicitly for better control #}
      <label for="id_username">Username</label>
      <input type="text" name="username" id="id_username" value="{{ form.username.value|default:'' }}" required />
      {% if form.username.errors %}
        <ul class="errorlist">{% for e in form.username.errors %}<li>{{ e }}</li>{% endfor %}</ul>
      {% endif %}

      <label for="id_password1">Password</label>
      <input type="password" name="password1" id="id_password1" required />
      {% if form.password1.errors %}
        <ul class="errorlist">{% for e in form.password1.errors %}<li>{{ e }}</li>{% endfor %}</ul>
      {% endif %}

      <label for="id_password2">Confirm Password</label>
      <input type="password" name="password2" id="id_password2" required />
      {% if form.password2.errors %}
        <ul class="errorlist">{% for e in form.password2.errors %}<li>{{ e }}</li>{% endfor %}</ul>
      {% endif %}

      <button type="submit">Create Account</button>

      {# Non-field errors #}
      {% if form.non_field_errors %}
        <ul class="errorlist">{% for e in form.non_field_errors %}<li>{{ e }}</li>{% endfor %}</ul>
      {% endif %}

      {% if messages %}
        {% for message in messages %}
          <div class="msg">{{ message }}</div>
        {% endfor %}
      {% endif %}
    </form>
    <div class="links">
      <a href="{% url 'login:login' %}">Already have an account? Log in</a>
    </div>
  </div>
</body>
</html>
